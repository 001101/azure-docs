---
title: Install Azure IoT Edge on Windows | Microsoft Docs
description: Azure IoT Edge installation instructions on Windows 10, Windows Server, and Windows IoT Core
author: kgremban
manager: philmea
# this is the PM responsible
ms.reviewer: veyalla
ms.service: iot-edge
services: iot-edge
ms.topic: conceptual
ms.date: 12/10/2018
ms.author: kgremban
ms.custom: seodec18
---
# Install the Azure IoT Edge runtime on Windows

The Azure IoT Edge runtime is what turns a device into an IoT Edge device. The runtime can be deployed on devices as small as a Raspberry Pi or as large as an industrial server. Once a device is configured with the IoT Edge runtime, you can start deploying business logic to it from the cloud. 

To learn more about how the IoT Edge runtime works and what components are included, see [Understand the Azure IoT Edge runtime and its architecture](iot-edge-runtime.md).

This article lists the steps to install the Azure IoT Edge runtime on your Windows x64 (AMD/Intel) system. Windows support is currently in Preview.

>[!NOTE]
Using Linux containers on Windows sytems is not a recommended or supported production configuration for Azure IoT Edge. However, it can be used for development and testing purposes.

## Supported Windows versions
Azure IoT Edge can be used for development and testing on following versions of Windows, when using Linux containers:
  * Windows 10/IoT Enterprise/IoT Core with October 2018 update (Build 17663).
  * Windows Server 1803

For more information about which operating systems are currently supported, refer to [Azure IoT Edge support](support.md#operating-systems). 

## Prepare for a container runtime 

Azure IoT Edge relies on a [OCI-compatible](https://www.opencontainers.org/) container runtime. If your IoT Edge device is a Windows computer, check that it meets the [system requirements](https://docs.microsoft.com/virtualization/hyper-v-on-windows/reference/hyper-v-requirements) for Hyper-V. If it's a virtual machine, enable [nested virtualization](https://docs.microsoft.com/virtualization/hyper-v-on-windows/user-guide/nested-virtualization) and allocate at least 2 GB memory.

If you're going to use Windows containers on your IoT Edge device, the installation script will install the Moby engine automatically for you. The Moby engine is the only officially supported container engine for IoT Edge devices. 

If you're going to use Linux containers on your IoT Edge device, you can use [Docker for Windows](https://www.docker.com/docker-windows), which can be configured to [use Linux containers](https://docs.docker.com/docker-for-windows/#switch-between-windows-and-linux-containers). You need to install Docker and configure it before installing IoT Edge. Linux containers on Windows are not supported in production, but can be useful for developing and testing. 

## Install the Azure IoT Edge security daemon

>[!NOTE]
>Azure IoT Edge software packages are subject to the license terms located in the packages (in the LICENSE directory). Please read the license terms prior to using the package. Your installation and use of the package constitutes your acceptance of these terms. If you do not agree with the license terms, do not use the package.

A PowerShell script downloads and installs the Azure IoT Edge security daemon. The security daemon then starts the first of two runtime modules, the IoT Edge agent, which enables remote deployments of other modules. 

A single IoT Edge device can be provisioned in one of three ways. Provision a device manually using a device connections string provided by IoT Hub. Or, you can use the Device Provisioning Service to automatically provision devices, which is helpful when you have many devices to provision. Or, provision a device based on files already on the device, which is helfpul if you've installed IoT Edge on the device before. Depending on your provisioning choice, choose the appropriate installation script. 

The following suggestions describe the common use cases and parameters for the IoT Edge installation script, but for the full list of options run `get-help Install-SecurityDaemon -full` in a PowerShell window. 

### Option 1: Install and manually provision

In this first option, you provide a device connection string generated by IoT Hub to provision the device. 

Follow the steps in [Register a new Azure IoT Edge device](how-to-register-device-portal.md) to register your device and retrieve the device connection string. 

To install and provision a device manually, your installation command can use the following common parameters: 

| Parameter | Required | Accepted values | Comments |
| --------- | -------- | --------------- | -------- |
| -Manual | Yes | None | Declares that you will provide a device connection string to provision the device manually |
| -ContainerOs | Yes | **Windows** or **Linux** | For Windows containers, a container engine will be included in the installation. For Linux containers, you need to install a container engine before starting the installation. Linux containers on Windows is a useful development scenario, but not supported in production. |
| -DeviceConnectionString | No | A connection string from an IoT Edge device registered in an IoT Hub, in single quotes | If you don't provide a connection string in the script parameters, you will be prompted for one during installation. |
| -Proxy | No | Proxy URL | Include this parameter if your device needs to go through a proxy server to reach the internet. For more information, see [Configure an IoT Edge device to communicate through a proxy server](how-to-configure-proxy-support.md). |
| -OfflineInstallationPath | No | Directory path | If this parameter is included, the installer will check the directory for the iotedged zip, Moby engine zip, Moby CLI zip, and VC Runtime MSI files required for installation. If all four files are in the directory, you can install IoT Edge while offline. You can also use this parameter to override the online version of a specific component. |
| -AgentImage | No | IoT Edge agent image URI | By default, a new IoT Edge installation uses the latest rolling tag for the IoT Edge agent image. Use this parameter to set a specific tag for the image version, or to provide your own agent image. For more information, see [Understand IoT Edge tags](how-to-update-iot-edge.md#understand-iot-edge-tags). |
| -Username | No | Container registry username | Use this parameter only if you set the -AgentImage parameter to a container in a private registry. Provide a username with access to the registry. |
| -Password | No | Secure password string | Use this parameter only if you set the -AgentImage parameter to a container in a private registry. Provide the password to access the registry. | 
| -SkipMobyCli | No | None | Don't install the Moby CLI (docker.exe) to $MobyInstallDirectory. Only applicable if -ContainerOS is set to Windows. |

For example, 

```powershell
. {Invoke-WebRequest -useb aka.ms/iotedge-win} | Invoke-Expression; `
Install-SecurityDaemon -Manual -ContainerOs Windows -DeviceConnectionString '<connection-string>'
```

### Option 2: Install and automatically provision

In this second option, you provision the device using the IoT Hub Device Provisioning Service. Provide the **Scope ID** from a Device Provisioning Service instance, and the **Registration ID** from your device.

Follow the steps in [Create and provision a simulated TPM Edge device on Windows](how-to-auto-provision-simulated-device-windows.md) to set up the Device Provisioning Service and retrieve its **Scope ID**, simulate a TPM device and retrieve its **Registration ID**, then create an individual enrollment. Once your device is registered in your IoT Hub, continue with the installation.  

   >[!TIP]
   >Keep the window that's running the TPM simulator open during your installation and testing. 

To install and provision a device automatically, your installation command can use the following common parameters:

| Parameter | Required | Accepted values | Comments |
| --------- | -------- | --------------- | -------- |
| -Dps | Yes | None | Declares that you will provide a Device Provisioning Service (DPS) scope ID and your device's Registration ID to provision through DPS.  |
| -ContainerOs | Yes | **Windows** or **Linux** | For Windows containers, a container engine will be included in the installation. For Linux containers, you need to install a container engine before starting the installation. Linux containers on Windows is a useful development scenario, but not supported in production. |
| -ScopeId | No | A scope ID from an instance of Device Provisioning Service associated with your IoT Hub. | If you don't provide a scope ID in the script parameters, you will be prompted for one during installation. |
| -RegistrationId | No | A registration ID generated on your device | If you don't provide a registration ID in the script parameters, you will be prompted for one during installtion. 
| -Proxy | No | Proxy URL | Include this parameter if your device needs to go through a proxy server to reach the internet. For more information, see [Configure an IoT Edge device to communicate through a proxy server](how-to-configure-proxy-support.md). |
| -OfflineInstallationPath | No | Directory path | If this parameter is included, the installer will check the directory for the iotedged zip, Moby engine zip, Moby CLI zip, and VC Runtime MSI files required for installation. If all four files are in the directory, you can install IoT Edge while offline. You can also use this parameter to override the online version of a specific component. |
| -AgentImage | No | IoT Edge agent image URI | By default, a new IoT Edge installation uses the latest rolling tag for the IoT Edge agent image. Use this parameter to set a specific tag for the image version, or to provide your own agent image. For more information, see [Understand IoT Edge tags](how-to-update-iot-edge.md#understand-iot-edge-tags). |
| -Username | No | Container registry username | Use this parameter only if you set the -AgentImage parameter to a container in a private registry. Provide a username with access to the registry. |
| -Password | No | Secure password string | Use this parameter only if you set the -AgentImage parameter to a container in a private registry. Provide the password to access the registry. | 
| -SkipMobyCli | No | None | Don't install the Moby CLI (docker.exe) to $MobyInstallDirectory. Only applicable if -ContainerOS is set to Windows. |

For example,

```powershell
. {Invoke-WebRequest -useb aka.ms/iotedge-win} | Invoke-Expression; `
Install-SecurityDaemon -Dps -ContainerOs Windows -ScopeId <DPS scope ID> -RegistrationId <device registration ID>
```

### Option 3: Install based on existing files

In this third option, you declare that a configuration file already exists on the device with its provisioning information. This option is mostly used to update the IoT Edge security daemon and runtime after uninstalling an existing version. You can use this installation option whether your device was originally provisioned manually or automatically. 

For more information, see [Update the IoT Edge security daemon and runtime](how-to-update-iot-edge.md).

To install IoT Edge with an existing configuration, your installtion command can use the following common parameters: 

| Parameter | Required | Accepted values | Comments |
| --------- | -------- | --------------- | -------- |
| -ExistingConfig | Yes | None | Declares that a config.yaml file already exists on the device with its provisioning information. |
| -ContainerOs | Yes | **Windows** or **Linux** | For Windows containers, a container engine will be included in the installation. For Linux containers, you need to install a container engine before starting the installation. Linux containers on Windows is a useful development scenario, but not supported in production. |
| -Proxy | No | Proxy URL | Include this parameter if your device needs to go through a proxy server to reach the internet. For more information, see [Configure an IoT Edge device to communicate through a proxy server](how-to-configure-proxy-support.md). |
| -OfflineInstallationPath | No | Directory path | If this parameter is included, the installer will check the directory for the iotedged zip, Moby engine zip, Moby CLI zip, and VC Runtime MSI files required for installation. If all four files are in the directory, you can install IoT Edge while offline. You can also use this parameter to override the online version of a specific component. |
| -SkipMobyCli | No | None | Don't install the Moby CLI (docker.exe) to $MobyInstallDirectory. Only applicable if -ContainerOS is set to Windows. |

For example, 

```powershell
. {Invoke-WebRequest -useb aka.ms/iotedge-win} | Invoke-Expression; `
Install-SecurityDaemon -ExistingConfig -ContainerOs Windows
```

## Verify successful installation

You can check the status of the IoT Edge service by: 

```powershell
Get-Service iotedge
```

Examine service logs from the last 5 minutes using:

```powershell

# Displays logs from last 5 min, newest at the bottom.

Get-WinEvent -ea SilentlyContinue `
  -FilterHashtable @{ProviderName= "iotedged";
    LogName = "application"; StartTime = [datetime]::Now.AddMinutes(-5)} |
  select TimeCreated, Message |
  sort-object @{Expression="TimeCreated";Descending=$false} |
  format-table -autosize -wrap
```

And, list running modules with:

```powershell
iotedge list
```

## Tips and suggestions

If your network has a proxy server, follow the steps in [Configure your IoT Edge device to communicate through a proxy server](how-to-configure-proxy-support.md) to install and start the IoT Edge runtime.

## Uninstall IoT Edge

If you want to remove the IoT Edge installation from your Windows device, use the following commands from an administrative PowerShell window. 

Remove the IoT Edge runtime, along with the Moby engine data. 

```PowerShell
. {Invoke-WebRequest} -useb aka.ms/iotedge-win} | Invoke-Expression; `
Uninstall-SecurityDaemon -DeleteConfig -DeleteMobyDataRoot
```


## Next steps

Now that you have an IoT Edge device provisioned with the runtime installed, you can [deploy IoT Edge modules](how-to-deploy-modules-portal.md).

If you are having problems with the Edge runtime installing properly, check out the [troubleshooting](troubleshoot.md) page.

To update an existing installation to the newest version of IoT Edge, see [Update the IoT Edge security daemon and runtime](how-to-update-iot-edge.md).
