---
# Mandatory fields. See more on aka.ms/skyeye/meta.
title: Storage accounts in Azure Media Services | Microsoft Docs
description: This article discusses how Media Services uses storage accounts. 
services: media-services
documentationcenter: ''
author: Juliako
manager: cfowler
editor: ''

ms.service: media-services
ms.workload: 
ms.topic: article
ms.date: 03/19/2018
ms.author: juliako
---

# Storage accounts

When creating a Media Services account, you need to supply the name of an Azure Storage account resource. The specified storage account is attached to your Media Services account. 

You must have one **Primary** storage account and you can have any number of **Secondary** storage accounts associated with your Media Services account. Media Services supports **General-purpose v2** (GPv2) or **General-purpose v1** (GPv1) accounts. 

>[!NOTE]
> Blob only accounts are not allowed as **Primary**. 

We recommend that you use GPv2, so you can take advantage of choosing between hot and cool storage tiers. To learn more about storage accounts, see [Azure Storage account options](../../storage/common/storage-account-options.md). 

## Assets in a storage account

In Media Services v3, the Storage APIs are used to upload files. The following .NET snippet shows how to use the Storage APIs with Media Services to upload your input files. You can also ingest remotely hosted content over HTTP(s), for more information, [Ingest from HTTP(s)](job-input-from-http-how-to.md). In this case, you do not need to create an input asset.

The following function performs these actions:

*	Creates the Asset 
*	Gets a writable [SAS URL](https://docs.microsoft.com/azure/storage/common/storage-dotnet-shared-access-signature-part-1) to the Assetâ€™s [container in storage](https://docs.microsoft.com/azure/storage/blobs/storage-quickstart-blobs-dotnet?tabs=windows#upload-blobs-to-the-container)
*	Uploads the file into the container in storage using the SAS URL

```csharp
private static Asset CreateInputAsset(IAzureMediaServicesClient client, string resourceGroupName, string accountName, string assetName, string fileToUpload)
{
    // Call Media Services API to create an Asset.
    // This method creates a container in storage for the Asset.
    // The files (blobs) associated with the asset will be stored in this container.
    Asset asset = client.Assets.CreateOrUpdate(resourceGroupName, accountName, assetName, new Asset());

    // Use Media Services API to get back a response that contains
    // SAS URL for the Asset container into which to upload blobs.
    // That is where you would specify read-write permissions 
    // and the exparation time for the SAS URL.
    var response = client.Assets.ListContainerSas(resourceGroupName, accountName, assetName, new ListContainerSasInput()
    {
        Permissions = AssetContainerPermission.ReadWrite,
        ExpiryTime = DateTimeOffset.Now.AddHours(4)
    });

    var sasUri = new Uri(response.AssetContainerSasUrls.First());
    
    // Use Storage API to get a reference to the Asset container
    // that was created by calling Asset's CreateOrUpdate method.  
    CloudBlobContainer container = new CloudBlobContainer(sasUri);
    var blob = container.GetBlockBlobReference(Path.GetFileName(fileToUpload));
    
    // Use Strorage API to upload the file into the container in storage.
    blob.UploadFromFile(fileToUpload);

    return asset;
}
```

> [!Note]
> You should not attempt to change the contents of blob containers that were generated by the Media Services SDK without using Media Services APIs.

## Next steps

To learn how to attach a storage account to your Media Services account, see [Create an account](create-account-cli-quickstart.md).
