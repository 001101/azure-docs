---
# Mandatory fields.
title: Route Azure Digital Twins events to external services
titleSuffix: Azure Digital Twins
description: Understand how to route events from Azure Digital Twins to other Azure Services.
author: baanders
ms.author: baanders # Microsoft employees only
ms.date: 2/21/2020
ms.topic: conceptual
ms.service: digital-twins

# Optional fields. Don't forget to remove # if you need a field.
# ms.custom: can-be-multiple-comma-separated
# ms.reviewer: MSFT-alias-of-reviewer
# manager: MSFT-alias-of-manager-or-PM-counterpart
---

# Event routes (preview)

Data from Azure Digital Twins often needs to be sent to downstream data services. For example, a hospital may want to send Azure Digital Twins event data to a [Time Series Insights](../time-series-insights/time-series-insights-update-overview.md) instance to record time series data of handwashing-related events for bulk analytics.

Data egress is handled using **event routes**. An event route lets you send event data, such as telemetry events, life-cycle events, and property change events from twins to defined endpoints in your subscriptions, such as an [Event Hub](../event-hubs/event-hubs-about.md), an [Event Grid](../event-grid/overview.md), or a [Service Bus](../service-bus-messaging/service-bus-messaging-overview.md). 

Event routes also allow Azure Digital Twins to send telemetry and notifications to external endpoints.
Azure Digital Twins will emit the following events (notifications and telemetry messages) and they will be routed to custom endpoints:
* Digital Twin change notification
* Digital Twin life-cycle notification
* Digital Twin edge Change notification
* Digital Twin telemetry messages

Azure Digital Twins will route all events defined above to custom endpoints.

![Azure Digital Twins routing workflow](./media/concepts-events/routing-workflow.png)

## Create event routes

Event routes are designed for sending data to external resources. The typical use case for event routes is to send data to external downstream resources; during the current preview release, they are also used to handle events within the digital twin graph and send data from twin to twin.  
 
Event routes are created with a simple interface: 
`Response RegisterEventRoute(string routeId, string endpointId, string topic, string filter);`

The endpointId must identify an endpoint, such as an Event Hub, Event Grid, or Service Bus that has been created in your subscription and attached to Azure Digital Twins beforehand, using Azure Digital Twins control plane APIs.

If a topic is specified and the registered endpoint supports topics, the topic field is used to send the message to the specified topic. 
By default, an event route accepts and routes every single message generated by the system. The filter parameter allows you to selectively route messages based on event types (such as telemetry events, twin property change events, life-cycle events, etc.), or by twin type, or other parameters. In this way, you can create selective routes. 

You can also access Azure Digital Twins resources from compute resources connected to event routes. However, events sent via routes come without context. A compute resource that wants to modify the Azure Digital Twins graph in response to an event passed via an event route has to either know the twin it wants to modify in advance, or use a query or navigation through the graph to find the appropriate target. It also is needs to establish security and access independently.

Event routes also excel at sending bulk event data from Azure Digital Twins to downstream resources such as TSI, storage, and analytics solutions.

## Next steps

See how to design and set up an event route:
* [Route event data](how-to-route-events.md)