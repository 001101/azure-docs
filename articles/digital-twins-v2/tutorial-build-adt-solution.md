---
# Mandatory fields.
title: 'Tutorial: Build out an Azure Digital Twin solution'
description: Step-by-step view of the process to build out a digital twin representation of your space.
author: philmea
ms.author: philmea # Microsoft employees only
ms.date: 2/12/2020
ms.topic: tutorial
ms.service: digital-twins

# Optional fields. Don't forget to remove # if you need a field.
# ms.custom: can-be-multiple-comma-separated
# ms.reviewer: MSFT-alias-of-reviewer
# manager: MSFT-alias-of-manager-or-PM-counterpart
---
# Build an Azure Digital Twin to represent your space

Intent: I want to understand how to integrate ADT into my IoT solution and build a proof of concept.​

Scenario: Build a complete IoT solution using ADT​

Goal: Build solution from the ground up, get solid core experience of platform from model to event handling​

Tooling: Azure subscription, CLI*, VS Code, .NET core​

Outline: ​

    - Update and extend an existing model​

    - Build simple .NET app for interacting with Digital Twins instance, integrate with AAD​

    - Add components to the Digital Twins graph (create twins, relationships, event handling)​

    - Identify what to change that will affect customer projects and works in their scenario​

* Potentially extend the Quickstart with custom code

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

*AN OVERVIEW OF WHAT TUTORIAL IS BUILDING

ADT is typically not used on its own. Commonly, an ADT solution uses the following components:
	The ADT service instance itself. It stores your models and your twins graph with all its state, and orchestrates event processing.
	One or more client apps that drive the ADT instance by configuring models, creating topology and extracting insight from the graph
	One or more external compute resources to process events generated by ADT or connected data sources such as devices. One common way to provide compute resources is via Azure Functions.
	An IoT Hub to provide device management and IoT data stream
	Downstream services to handle tasks such as workflow integration (e.g. MS Flow), cold storage, time series integration or analytics. 

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

*SETTING UP RESOURCES
Creating an ADT Instance
You can use Azure Portal to create a new instance of ADT:
Describe how to find the ADT PaaS offering in the portal and create an instance using the portal
 
For production projects, however, we recommend using an automation-centric approach, where all artifacts – not just code, but also configuration scripts – are stored in version-controlled repositories. developer experience support. This approach makes it easier to implement a reliable development cycle.
 
To get started with ADT using a command line approach, create an empty project directory on your machine and issue the following commands:
az dt dev init
This will create an empty project set up readily for ADT development.
Alternatively, there are also several pre-built starter projects you can begin with:
az dt init --quickstart <project name>
Exact set of projects still TBD 

Documentation on how to work with the starter project or init project still outstanding
Setting Up IoT Hub
Description on how to connect to IoT Hub
As part of the configuration of an ADT instance (in the portal or via CLI/ARM), you can connect a pre-existing IoT Hub to ADT. Once an IoT Hub is attached to ADT, ADT will automatically create special twins for all devices newly registered on IoT Hub. For PnP devices, it will also synchronize properties to the ADT graph. Finally, all telemetry from devices will produce telemetry messages in ADT.
See the section on IoT Hub Integration for more information.  
Setting up Endpoints
To connect ADT to downstream data consumers, you need to set up consumer endpoints in your subscription and attach them to ADT. Initially, supported endpoints include:
	Event Hub
	Event Grid
	Service Bus
To attach an endpoint to ADT, you need to create the endpoint in your subscription first, using the portal, command line or ARM. 
You can then use the ADT portal page or ARM/CLI to attach the endpoints to ADT.
