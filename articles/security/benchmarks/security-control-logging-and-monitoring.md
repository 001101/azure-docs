---
title: Security Control - Logging and Monitoring
description: Security Control Logging and Monitoring
author: msmbaldwin
manager: rkarlin

ms.service: security
ms.topic: conceptual
ms.date: 12/16/2019
ms.author: mbaldwin
ms.custom: security-recommendations

---

# Security Control: Logging and Monitoring

## Logging and Monitoring 2.1

**CIS Control IDs**: 6.1

**Recommendation**: <div>Use Approved Time Synchronization resource</div>

**Guidance**: Microsoft maintains time sources for Azure resources, customers may update time synchronization for compute deployments owned by customer.<br><br>How to configure time synchronization for Azure compute resources:<br>https://docs.microsoft.com/azure/virtual-machines/windows/time-sync

**Responsibility**: Microsoft

## Logging and Monitoring 2.2

**CIS Control IDs**: 6.5, 6.6

**Recommendation**: Configure Central Security Log Management

**Guidance**: Ingest logs via Azure Monitor to aggregate security data generated by endpoints devices, network resources, and other security systems. Within Azure Monitor, use Log Analytics Workspace(s) to query and perform analytics, and use Azure Storage Accounts for long-term/archival storage.<br><br>How to collect platform logs and metrics with Azure Monitor:<br>https://docs.microsoft.com/azure/azure-monitor/platform/diagnostic-settings<br><br>How to collect Azure Virtual Machine internal host logs with Azure Monitor:<br>https://docs.microsoft.com/azure/azure-monitor/learn/quick-collect-azurevm

**Responsibility**: Customer

## Logging and Monitoring 2.3

**CIS Control IDs**: 6.2, 6.3

**Recommendation**: Enable audit logging for Azure Resources

**Guidance**: Enable Diagnostic Settings for Azure Resource Logs for access to audit, security, and diagnostic logs. Activity logs which includes event source, date, user, timestamp, source addresses, destination addresses, and other useful elements.<br><br>How to collect platform logs and metrics with Azure Monitor:<br>https://docs.microsoft.com/azure/azure-monitor/platform/diagnostic-settings<br><br>Understanding logging and different log types in Azure:<br>https://docs.microsoft.com/azure/azure-monitor/platform/platform-logs-overview

**Responsibility**: Customer

## Logging and Monitoring 2.4

**CIS Control IDs**: 6.2, 6.3

**Recommendation**: <div>Collect Security Logs from Operating Systems</div>

**Guidance**: <div>If the compute resource is owned by Microsoft, then Microsoft is responsible for monitoring it. If the compute resource is owned by your organization, it's your responsibility to monitor it. You can use Azure Security Center to monitor the OS. Data collected by Security Center from the operating system includes OS type and version, OS (Windows event logs), running processes, machine name, IP addresses, and logged in user. The Log Analytics Agent also collects crash dump files.<br></div><br>How to collect Azure Virtual Machine internal host logs with Azure Monitor:<br>https://docs.microsoft.com/azure/azure-monitor/learn/quick-collect-azurevm<br><br>Understanding Azure Security Center data collection:<br>https://docs.microsoft.com/azure/security-center/security-center-enable-data-collection

**Responsibility**: Customer

## Logging and Monitoring 2.5

**CIS Control IDs**: 6.4

**Recommendation**: Configure Security Log Storage Retention

**Guidance**: <div>Within Azure Monitor, set your Log Analytics Workspace retention period according to your organization's compliance regulations. Use Azure Storage Accounts for long-term/archival storage.<br></div><br>How to set log retention parameters for Log Analytics Workspaces:<br>https://docs.microsoft.com/azure/azure-monitor/platform/manage-cost-storage#change-the-data-retention-period

**Responsibility**: Customer

## Logging and Monitoring 2.6

**CIS Control IDs**: 6.7

**Recommendation**: Monitor and Review Logs

**Guidance**: <div>Analyze and monitor logs for anomalous behavior and regularly review results. Use Azure Monitor's Log Analytics Workspace to review logs and perform queries on log data.<br></div><br>Understanding Log Analytics Workspace:<br>https://docs.microsoft.com/azure/azure-monitor/log-query/get-started-portal<br><br>How to perform custom queries in Azure Monitor:<br>https://docs.microsoft.com/azure/azure-monitor/log-query/get-started-queries

**Responsibility**: Customer

## Logging and Monitoring 2.7

**CIS Control IDs**: 6.8

**Recommendation**: Enable Alerts for Anomalous Activity

**Guidance**: <div>Use Azure Security Center with Log Analytics Workspace for monitoring and alerting on anomalous activity found in security logs and events.<br></div><br>How to manage alerts in Azure Security Center:<br>https://docs.microsoft.com/azure/security-center/security-center-managing-and-responding-alerts<br><br>How to alert on log analytics log data:<br>https://docs.microsoft.com/azure/azure-monitor/learn/tutorial-response

**Responsibility**: Customer

## Logging and Monitoring 2.8

**CIS Control IDs**: 8.6

**Recommendation**: Centralize Anti-malware Logging

**Guidance**: Enable antimalware event collection for a Azure Virtual Machines and Cloud Services.<br><br>How to configure Microsoft Antimalware for Virtual Machines:<br>https://docs.microsoft.com/powershell/module/servicemanagement/azure/set-azurevmmicrosoftantimalwareextension?view=azuresmps-4.0.0<br><br>How to configure Microsoft Antimalware for Cloud Services:<br>https://docs.microsoft.com/powershell/module/servicemanagement/azure/set-azureserviceantimalwareextension?view=azuresmps-4.0.0<br><br>Understanding Microsoft Antimalware:<br>https://docs.microsoft.com/azure/security/fundamentals/antimalware

**Responsibility**: Customer

## Logging and Monitoring 2.9

**CIS Control IDs**: 8.7

**Recommendation**: Enable DNS Query Logging

**Guidance**: <div>Implement third party solution for dns logging.</div>

**Responsibility**: Customer

## Logging and Monitoring 2.1

**CIS Control IDs**: 8.8

**Recommendation**: Enable Command-line Audit Logging

**Guidance**: <div>Customer to manually configure console logging and PowerShell Transcription on a per-node basis.</div>

**Responsibility**: Customer

